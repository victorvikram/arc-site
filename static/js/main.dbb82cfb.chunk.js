(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{209:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),i=n(54),o=n.n(i),a=(n(92),n(5)),c=n(19),l=n(14),u=n(8),h=n(9),p=n(11),d=n(10),f=(n(93),n(6)),g=(n(94),n(95),n(55)),j=(n(98),n(99),n(1));function b(e){var t=e.selectedColor,n=e.dragging,s=e.changeColor,i=e.pixelColor,o=Object(r.useState)(null),c=Object(a.a)(o,2),l=c[0],u=c[1];function h(){var e=T.indexOf(t);s(e),u(null)}var p=null==l?T[i]:l;return Object(j.jsx)("div",{className:"pixel",onMouseDown:h,onMouseEnter:function(){n?h():u(t)},onMouseLeave:function(){u(null)},style:{backgroundColor:p}})}function v(e){for(var t=e.width,n=e.selectedColor,r=e.dragging,s=e.changeColor,i=e.pixelColors,o=[],a=function(e){o.push(Object(j.jsx)(b,{selectedColor:n,dragging:r,changeColor:function(t){return s(e,t)},pixelColor:i[e]},e))},c=0;c<t;c++)a(c);return Object(j.jsx)("div",{className:"row",children:o})}function x(e){var t=e.problemCat,n=e.grid,r=e.setDestToSource,s=e.contextRows,i=e.testRows,o=e.swapAandB,a=e.indexTrail,c=e.stage,l=e.type,u=e.lockedVariables,h=e.handleGridTypeChange,p=e.handleGridRowChange,d=e.handleGridColChange,g=e.handleAnswerLengthChange,b=e.correctAnswer,v=e.setCorrectAnswer,x=e.multipleChoice,m=e.penColor,C=e.setPixelColor,w=e.handleSceneRowChange,y=e.handleSceneColChange,T=e.setString;function S(e){if("context"===c){var t=Object(f.a)(a);t.push(e);var n=Object(f.a)(a);n.push(e+1),o(t,n)}else if("answer"===c||"stimulus"===c){var r=Object(f.a)(a),s=Object(f.a)(a);s[1]=+(+s[1]+1),o(r,s);var i="stimulus"===c?"answer":"stimulus",l=[a[0],a[1],i],u=[a[0],+ +a[1]+1,i];o(l,u)}}return console.log(c),console.log(u),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{id:"options",children:[!(c+"-gridType"in u)&&Object(j.jsx)(N,{id:c+"-gridType",options:["pixels","string"],selection:l,onChange:h}),"answer"===c&&!("answer-choice"in u)&&Object(j.jsx)(q,{id:"answer-choice",name:"# Choices",value:n.length,onChange:g}),!("answer"===c)&&!(c+"-row"in u)&&"arc"!==t&&Object(j.jsx)(q,{id:c+"-row",name:"# Rows",value:n.length,onChange:p}),!("answer"===c)&&!(c+"-row"in u)&&"arc"===t&&Object(j.jsx)(q,{id:c+"-row",name:"# Demonstrations",value:n.length,onChange:p}),!("answer"===c)&&!(c+"-col"in u)&&Object(j.jsx)(q,{id:c+"-col",name:"# Cols",value:n[0].length,onChange:d})]}),function(){var e;e="answer"===c?function(){for(var e=[],t=0;t<Math.ceil(n.length/3);t++){e.push([]);for(var r=0;r<3;r++){var s=n[3*t+r];e[t].push(s)}}return e}():n;for(var o=[],u=0;u<e.length;u++){for(var h=[],p=function(o){var p="answer"===c?3*u+o:u,d="answer"===c?null:o;console.log(b,p);var f=void 0;f="bongard"===t?v:function(){return v(p)};var g=a.concat([p,d]),q=void 0,_=void 0;"context"===c?(q=a.concat([p,+!d]),_=p===s-1):"stimulus"===c?(q=[a[0],a[1],"answer",0],_=+a[1]===i-1):"answer"===c&&(q=[a[0],a[1],"stimulus",0,0],_=+a[1]===i-1),null!=e[u][o]&&h.push(Object(j.jsx)(O,{type:l,copyToCounterpart:function(){return r(g,q)},displaySwap:!_&&"answer"!==c&&d%2===0,swapWithNext:function(){return S(p)},content:k([p,d],n),stage:c,multipleChoice:x,correct:"answer"===c&&b===p,setCorrectAnswer:f,changeWidth:function(e){return y(e,p,d)},changeHeight:function(e){return w(e,p,d)},penColor:m,setPixelColor:function(e,t,n){return C(e,t,n,p,d)},setString:function(e){return T(e,p,d)},problemCat:t},o))},d=0;d<e[0].length;d++)p(d);o.push(Object(j.jsx)("div",{className:"flex-container",children:h},u))}return o}()]})}function O(e){var t=e.type,n=e.content,r=e.copyToCounterpart,s=e.swapWithNext,i=e.displaySwap,o=e.stage,a=e.multipleChoice,c=e.correct,l=e.setCorrectAnswer,u=e.changeWidth,h=e.changeHeight,p=e.penColor,d=e.setPixelColor,f=e.setString,g=e.problemCat;return Object(j.jsxs)("div",{children:["pixels"===t&&Object(j.jsx)(C,{pixels:n,changeHeight:h,changeWidth:u,penColor:p,setPixelColor:d}),"string"===t&&Object(j.jsx)(m,{string:n,setString:f}),"stimulus"===o&&"bongard"===g&&Object(j.jsx)("div",{children:Object(j.jsx)(N,{options:["left","right","neither"],selection:["left","right","neither"][c],onChange:function(e){return l(["left","right","neither"].indexOf(e.target.value))}})}),"arc"===g&&Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:r,children:" Copy to counterpart"})}),"arc"===g&&i&&Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:s,children:"Swap with next"})}),"answer"===o&&a&&!("bongard"!==g)&&Object(j.jsx)("div",{children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",checked:c,onChange:l}),"Correct"]})})]})}function m(e){var t=e.string,n=e.setString;return Object(j.jsx)("div",{className:"flex-child",children:Object(j.jsx)("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)}})})}function C(e){var t=e.pixels,n=e.changeHeight,s=e.changeWidth,i=e.penColor,o=e.setPixelColor,c=Object(r.useState)(!1),l=Object(a.a)(c,2),u=l[0],h=l[1];for(var p=[],d=function(e){p.push(Object(j.jsx)(v,{width:t[0].length,selectedColor:i,dragging:u,changeColor:function(t,n){return o(n,e,t)},pixelColors:t[e]},e))},f=0;f<t.length;f++)d(f);return Object(j.jsxs)("div",{className:"flex-child",children:[Object(j.jsxs)("div",{id:"options",children:[Object(j.jsx)(q,{name:"Width",value:t[0].length,onChange:s}),Object(j.jsx)(q,{name:"Height",value:t.length,onChange:n})]}),Object(j.jsx)("div",{id:"pixels",onMouseEnter:function(){return h(!1)},onMouseLeave:function(){return h(!1)},onMouseDown:function(e){e.preventDefault(),h(!0)},onMouseUp:function(){return h(!1)},children:p})]})}var w=n(87),y=n(86),T=["#000000","#0068cf","#ff3937","#00c443","#ffd631","#a0a0a0","#f916b1","#ff7a2c","#63d6fc","#820f23"];function S(e){for(var t=e.length,n=e[0].length,r=Array(e.length).fill().map((function(){return Array(e[0].length)})),s=0;s<t;s++)for(var i=0;i<n;i++)r[s][i]=e[s][i];return r}function k(e,t){for(var n=t,r=0;null!=e[r];)n=n[e[r]],r+=1;return n}function q(e){return Object(j.jsxs)("div",{className:"option",children:[Object(j.jsx)("input",{type:"number",className:"panelInput",value:e.value,onChange:e.onChange}),Object(j.jsx)("span",{className:"inputLabel",children:e.name})]})}function _(){var e=Object(r.useState)("other-0"),t=Object(a.a)(e,2),n=t[0],s=t[1],i=Object(r.useState)("arc"),o=Object(a.a)(i,2),c=o[0],u=o[1],h=Object(r.useState)("pixels"),p=Object(a.a)(h,2),d=p[0],b=p[1],v=Object(r.useState)(!1),x=Object(a.a)(v,2),O=x[0],m=x[1],C=Object(r.useState)(["context",0,null]),w=Object(a.a)(C,2),_=w[0],N=w[1],G=Object(r.useState)({context:[[[se(d)]]],questions:[{stimulus:[[se(d)]],answer:[se(d)],correct:0}]}),L=Object(a.a)(G,2),D=L[0],I=L[1],M=Object(r.useState)(T[0]),B=Object(a.a)(M,2),E=B[0],U=B[1],W={arc:{contextLength:1,multipleChoice:!1,defaultGridType:"pixels","context-col":2,"stimulus-col":1,"stimulus-row":1,"answer-choice":1,"context-gridType":"pixels","stimulus-gridType":"pixels","answer-gridType":"pixels"},bongard:{contextLength:2,multipleChoice:!0,defaultGridType:"pixels","context-col":2,"context-row":3,"stimulus-col":1,"stimulus-row":1,"answer-choice":3,"context-gridType":"pixels","stimulus-gridType":"pixels","answer-gridType":"string","answer-choices":["left","right","neither"]},"letter-string":{contextLength:1,multipleChoice:!1,defaultGridType:"string","context-col":2,"stimulus-col":1,"stimulus-row":1,"answer-choice":1,"context-gridType":"string","stimulus-gridType":"string","answer-gridType":"string"},other:{}};Object(r.useEffect)((function(){X("arc")}),[]);var H=Object(r.useRef)();function J(e){var t=parseInt(e.target.value);"questionLength"in W[c]||"answer-choices"in W[c]?"questionLength"in W[c]||Q(["questions"],t,(function(){return{stimulus:[[se(d)]],answer:W[c]["answer-choices"],correct:0}})):Q(["questions"],t,(function(){return{stimulus:[[se(d)]],answer:[se(d)],correct:0}}))}function Q(e,t,n,r){var s=k(e,D);console.log(n());for(var i=Object(f.a)(s),o=t-i.length,a=0;a<Math.abs(o);a++)o<0?i.pop():o>0&&i.push(n());return console.log(i),z(e,i,r)}function V(e,t,n,r){return z(e,ee(k(e,ie(r)),t,n),r)}function F(e,t,n,r){return z(e,te(k(e,ie(r)),t,n),r)}function z(e,t,n){var r=ie(n);return ne(e,t,r),"undefined"===typeof n&&I(r),r}function K(e,t,n){var r=k(e,ie(n));return console.log(n),console.log(r),"answer"===Y(e)?z(e,re(r.length,null,(function(){return se(t)})),n):z(e,re(r.length,r[0].length,(function(){return se(t)})),n)}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(var n in 0===t&&(t=Object(l.a)({},D)),W[e]){var r=n.split("-");if("contextLength"===n)t=Q(["context"],W[e].contextLength,(function(){return[[se(d)]]}),t);else if("multipleChoice"===n)m(W[e].multipleChoice);else if("defaultGridType"===n)b(W[e].defaultGridType);else if("context"===r[0]&&["row","col"].includes(r[1]))for(var s=t.context.length,i=function(n){var s=Z(k(["context",n],t));"row"===r[1]?t=V(["context",n],W[e]["context-row"],(function(){return se(s)}),t):"col"===r[1]&&(t=F(["context",n],W[e]["context-col"],(function(){return se(s)}),t))},o=0;o<s;o++)i(o);else if(["stimulus","answer"].includes(r[0])&&["row","col"].includes(r[0]))for(var a=t.questions.length,c=function(n){var s=Z(k(["context",n],t));"row"===r[1]?t=V(["questions",n,r[0]],W[e][r[0]+"-row"],(function(){return se(s)}),t):"col"===r[1]&&(t=F(["questions",n,r[0]],W[e][r[0]+"-col"],(function(){return se(s)}),t))},u=0;u<a;u++)c(u);else if("context"===r[0]&&"gridType"===r[1])for(var h=t.context.length,p=0;p<h;p++)console.log(t.context[p]),t=K(["context",p],W[e]["context-gridType"],t);else if(["stimulus","answer"].includes(r[0])&&"gridType"===r[1])for(var f=t.questions.length,g=0;g<f;g++)t=K(["questions",g,r[0]],W[e][r[0]+"-gridType"],t);else if("answer"===r[0]&&"choice"===r[1])for(var j=t.questions.length,v=function(n){var r=Z(k(["questions",n,"answer"],t));t=Q(["questions",n,"answer"],W[e]["answer-choice"],(function(){return se(r)}),t)},x=0;x<j;x++)v(x);else if("answer"===r[0]&&"choices"===r[1])for(var O=t.questions.length,C=t.questions[0].answer.length,w=0;w<O;w++)for(var y=0;y<C;y++)t.questions[w].answer[y]=W[e]["answer-choices"][y]}I(t)}function Y(e){return e.includes("context")?"context":e.includes("stimulus")?"stimulus":!!e.includes("answer")&&"answer"}function Z(e){var t;return"string"===typeof(t=function(e){for(var t=e,n=0;t.constructor===Array;)t=t[0],n+=1;return n%2===1}(e)?e[0]:e[0][0])?"string":t.constructor===Array?"pixels":void 0}function $(e){var t=[],n=e.cols;for(var r in e.items){var s=Math.floor(r/n);s>=t.length&&t.push([]),t[s].push(e.items[r])}return t}function ee(e,t,n){for(var r=e.length,s=e[0].length,i=S(e),o=t-r,a=0;a<Math.abs(o);a++)if(o<0)i.pop();else if(o>0){var c=Array(s).fill().map(n);i.push(c)}return i}function te(e,t,n){for(var r=e.length,s=e[0].length,i=S(e),o=t-s,a=0;a<r;a++)for(var c=0;c<Math.abs(o);c++)o<0?i[a].pop():o>0&&i[a].push(n());return i}function ne(e,t,n){for(var r=0,s=n;null!=e[r+1];)s=s[e[r]],r+=1;s[e[r]]=t}function re(e,t,n){return null==t?Array(e).fill().map(n):Array(e).fill().map((function(){return Array(t).fill().map(n)}))}function se(e){return"pixels"===e?Array(6).fill().map((function(){return Array(6).fill(0)})):"string"===e?"":void 0}function ie(e){return"undefined"===typeof e?Object(l.a)({},D):e}function oe(e){return e<1?e=1:e>30&&(e=30),e}return Object(j.jsxs)("div",{id:"editor",ref:H,children:[Object(j.jsx)("h1",{children:"ARC Editor"}),Object(j.jsx)("p",{children:!1}),!1,!1,Object(j.jsx)(A,{handleChange:function(e){var t=new FileReader;t.readAsText(e.target.files[0],"UTF-8"),t.onload=function(e){var t=JSON.parse(e.target.result);"context"in t?function(e){var t=[];for(var n in e.context){var r=$(e.context[n]);t.push(r)}var i,o=[];for(var a in e.questions){var c=$(e.questions[a].stimulus),l=void 0,h=void 0;0===e.questions[a].choices.length?(l=[e.questions[a].answer],h=0,i=!1):(l=e.questions[a].choices,h=e.questions[a].answer,i=!0),o.push({stimulus:c,answer:l,correct:h})}I({context:t,questions:o}),s(e.id),u(e.category),m(i)}(t):function(e){var t=[];for(var n in e.train){var r=e.train[n].input,i=e.train[n].output;t.push([r,i])}var o=[t],a=[];for(var c in e.test){var l=[[e.test[c].input]],h=[e.test[c].output],p=0;a.push({stimulus:l,answer:h,correct:p})}I({context:o,questions:a}),s("arc-0"),u("arc"),m(!1)}(t)}}}),Object(j.jsx)("button",{onClick:function(){var e={context:[[[se(d)]]],questions:[{stimulus:[[se(d)]],answer:[se(d)],correct:0}]};X(c,e)},children:"Clear"}),Object(j.jsxs)("div",{id:"options",className:"addPadding",children:[!("contextLength"in W[c])&&Object(j.jsx)(q,{name:"# Context",value:D.context.length,onChange:function(e){var t=parseInt(e.target.value);"contextLength"in W[c]||Q(["context"],t,(function(){return[[se(d)]]}))}}),!["arc","letter-string","bongard"].includes(c)&&Object(j.jsx)(q,{name:"# Questions",value:D.questions.length,onChange:J})]}),Object(j.jsx)(R,{indexTrail:_,setIndexTrail:function(e,t){isNaN(t)||(t=parseInt(t));var n=Object(f.a)(_);n[e]=t;for(var r=e+1;r<3;r++)n[r]=null;n=function(e){null==e[1]&&(e[1]=0);null==e[2]&&(e[2]="context"===e[0]?null:"stimulus");return e}(n),N(n)},problemCat:c,gridType:Z(k(_,D)),problem:D,setPenColor:U,penColor:E}),Object(j.jsx)("div",{children:!("multipleChoice"in W[c])&&Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{id:"multipleChoice",type:"checkbox",checked:O,onChange:function(){m("multipleChoice"in W[c]?W[c].multipleChoice:!O)}}),"Multiple Choice"]})}),Object(j.jsxs)("div",{children:[Object(j.jsx)(P,{problemCat:c,problem:D,currentItemIndexTrail:_,calcStage:Y,calcGridType:Z,lockedVariables:W[c],handleGridTypeChange:function(e,t){var n=t.target.value;Y(e)+"-gridType"in W[c]||K(e,n)},handleAnswerLengthChange:function(e,t){var n=parseInt(t.target.value);if(!("questionLength"in W[c])){if(n>1&&!O)m(!0);else if(n<1)return;var r=Z(k(e,D));Q(e,n,(function(){return se(r)}))}},handleQuestionLengthChange:J,handleCorrectAnswer:function(e,t){if("answer"===Y(e)&&O)return function(e,t){console.log("setting correct answer");var n=Object(l.a)({},D),r=Object(f.a)(e);return r[2]="correct",ne(r,t,n),I(n),!0}(e,t)},getCorrectAnswer:function(e){if("stimulus"===Y(e)||"answer"===Y(e))return D[e[0]][e[1]].correct},multipleChoice:O,handleGridRowChange:function(e,t){var n=oe(parseInt(t.target.value));if(!(Y(e)+"-row"in W[c])){var r=Z(k(e,D));V(e,n,(function(){return se(r)}))}},handleGridColChange:function(e,t){var n=oe(parseInt(t.target.value));if(!(Y(e)+"-col"in W[c])){var r=Z(k(e,D));F(e,n,(function(){return se(r)}))}},handleSceneRowChange:function(e,t,n,r){!function(e,t,n,r){var s=k(e,D),i=ee(k([n,r],s),t,(function(){return 0})),o=Object(f.a)(s);ne([n,r],i,o),z(e,o)}(e,parseInt(r.target.value),t,n)},handleSceneColChange:function(e,t,n,r){!function(e,t,n,r){var s=k(e,D),i=te(k([n,r],s),t,(function(){return 0})),o=Object(f.a)(s);ne([n,r],i,o),z(e,o)}(e,parseInt(r.target.value),t,n)},penColor:E,setPixelColor:function(e,t,n,r,s,i){var o=k(e,D),a=function(e,t,n,r){var s=S(e);return s[t][n]=r,s}(k([s,i],o),n,r,t),c=Object(f.a)(o);ne([s,i],a,c),z(e,c)},setString:function(e,t,n,r){var s=k(e,D),i=Object(f.a)(s);ne([n,r],t,i),z(e,i)},setDestToSource:function(e,t){var n=Object(l.a)({},D);ne(t,k(e,n),n),I(n)},swapAandB:function(e,t){console.log("swapping",e,t),console.log(D);var n=Object(l.a)({},D),r=k(e,n);ne(e,k(t,n),n),ne(t,r,n),I(n)}}),Object(j.jsx)("button",{onClick:function(){var e,t,r,s,i={};if("arc"===c)i=function(){var e={train:[],test:[]},t=D.context[0];for(var n in t){var r=t[n],s={input:r[0],output:r[1]};e.train.push(s)}for(var i in D.questions){var o=D.questions[i],a={input:o.stimulus[0][0],output:o.answer[0]};e.test.push(a)}return e}();else{for(var o in i.category=c,i.id=n,i.context=[],i.mode=O?"discriminate":"generate",i.answer_type="categorical_list",D.context)t=(e=D.context[o]).length,r=e[0].length,s=e.flat(),i.context.push({rows:t,cols:r,type:"categorical_list",items:s});var a,l,u;for(var h in i.questions=[],D.questions)t=(a=D.questions[h].stimulus).length,r=a[0].length,s=a.flat(),l=O?D.questions[h].answer:[],u=O?D.questions[h].correct:D.questions[h].answer[0],i.questions.push({stimulus:{rows:t,cols:r,items:s,type:"categorical_list"},choices:l,answer:u})}var p=JSON.stringify(i),d=new Blob([p],{type:"application/json"}),f=URL.createObjectURL(d);Object(y.saveAs)(f)},className:"button",children:"Export JSON"}),Object(j.jsx)("button",{onClick:function(){return Object(g.exportComponentAsPNG)(H)},className:"button",children:"Export PNG"})]})]})}function A(e){var t=e.handleChange;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Upload problem file"}),Object(j.jsx)("input",{type:"file",onChange:t})]})}function P(e){var t=e.problemCat,n=e.problem,r=e.currentItemIndexTrail,s=e.calcStage,i=e.calcGridType,o=e.lockedVariables,c=e.handleGridTypeChange,l=e.handleAnswerLengthChange,u=e.handleQuestionLengthChange,h=e.handleCorrectAnswer,p=e.getCorrectAnswer,d=e.multipleChoice,f=e.handleGridRowChange,g=e.handleGridColChange,b=e.handleSceneRowChange,v=e.handleSceneColChange,O=e.penColor,m=e.setPixelColor,C=e.setString,w=e.setDestToSource,y=e.swapAandB;function T(e){var r=[],a=[];for(var u in e)r=r.concat(e[u]),a.push([]);for(var T=function(u){for(var T=r[u],S=void 0,q=0;q<e.length;q++)e[q].includes(T)&&(S=a[q]);var _=k(T,n),A=[T[0],T[1],"answer"];S.push(Object(j.jsx)(x,{problemCat:t,grid:_,contextRows:n.context[0].length,testRows:n.questions.length,indexTrail:T,setDestToSource:function(e,t){return w(e,t)},swapAandB:function(e,t){return y(e,t)},stage:s(T),type:i(_),lockedVariables:o,handleGridTypeChange:function(e){return c(T,e)},handleGridRowChange:function(e){return f(T,e)},handleGridColChange:function(e){return g(T,e)},handleAnswerLengthChange:function(e){return l(T,e)},correctAnswer:p(T),setCorrectAnswer:function(e){return h(A,e)},multipleChoice:d,handleSceneColChange:function(e,t,n){return v(T,t,n,e)},handleSceneRowChange:function(e,t,n){return b(T,t,n,e)},penColor:O,setPixelColor:function(e,t,n,r,s){return m(T,e,t,n,r,s)},setString:function(e,t,n){return C(T,e,t,n)}}))},S=0;S<r.length;S++)T(S);return a}function S(){var e,t,r=[];for(var s in n.questions)r.push(["questions",s,"stimulus"]),r.push(["questions",s,"answer"]);var i=T([[["context",0]],r]),o=Object(a.a)(i,2);e=o[0],t=o[1];for(var c=[],l=0;l<t.length;l+=2)c.push(Object(j.jsx)("div",{className:"flex-container",children:[t[l],t[l+1]]}));return Object(j.jsxs)("div",{className:"flex-container",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Demonstrations"}),e]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Tests"}),Object(j.jsx)(q,{name:"# Tests",value:n.questions.length,onChange:u}),c]})]})}return Object(j.jsx)("div",{children:function(){if("arc"===t)return S();if("bongard"===t)return function(){var e=[];for(var t in n.questions)e.push(["questions",t,"stimulus"]);var r=T([[["context",0]],[["context",1]],e]),s=Object(a.a)(r,3),i=s[0],o=s[1],c=s[2];return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"flex-container",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Category 1"}),i]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Category 2"}),o]})]}),Object(j.jsx)(q,{name:"# Tests",value:n.questions.length,onChange:u}),Object(j.jsx)("div",{className:"flex-container",children:c})]})}();if("letter-string"===t)return S();var e=[],w=k(r,n);return e.push(Object(j.jsx)(x,{problemCat:t,grid:w,indexTrail:r,stage:s(r),type:i(w),lockedVariables:o,handleGridTypeChange:function(e){return c(r,e)},handleGridRowChange:function(e){return f(r,e)},handleGridColChange:function(e){return g(r,e)},handleAnswerLengthChange:function(e){return l(r,e)},correctAnswer:p(r),setCorrectAnswer:function(e){return h(r,e)},multipleChoice:d,handleSceneColChange:function(e,t,n){return v(r,t,n,e)},handleSceneRowChange:function(e,t,n){return b(r,t,n,e)},penColor:O,setPixelColor:function(e,t,n,s,i){return m(r,e,t,n,s,i)},setString:function(e,t,n){return C(r,e,t,n)}})),Object(j.jsx)("div",{className:"flex-container",children:e})}()})}function R(e){var t=e.indexTrail,n=e.setIndexTrail,r=e.problemCat,s=e.gridType,i=e.problem,o=e.penColor,a=e.setPenColor;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{}),!["arc","letter-string"].includes(r)&&Object(j.jsx)("div",{className:"flex-container",children:function(e){var t=[];t.push(Object(j.jsx)(N,{id:"type",options:["context","questions"],selection:e[0],onChange:function(e){return n(0,e.target.value)}},0));var r=i[e[0]].length,s=Object(f.a)(Array(r).keys());return t.push(Object(j.jsx)(N,{id:"parentIndex",options:s,selection:e[1],onChange:function(e){return n(1,e.target.value)}},1)),"questions"===e[0]&&t.push(Object(j.jsx)(N,{id:"questionPart",options:["stimulus","answer"],selection:e[2],onChange:function(e){return n(2,e.target.value)}},2)),t}(t)}),("pixels"===s||"arc"===r)&&Object(j.jsx)("div",{className:"addPadding",children:Object(j.jsx)(w.a,{color:o,colors:T,onChangeComplete:function(e){return a(e.hex)},width:42*T.length,circleSize:28,circleSpacing:14})})]})}function N(e){var t=e.id,n=e.options,r=e.selection,s=e.onChange,i=[];for(var o in n)i.push(Object(j.jsx)("option",{value:n[o],children:n[o]},o));return Object(j.jsx)("select",{id:t,value:r,onChange:s,children:i})}n(209);var G=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"calculateText",value:function(){return this.props.show?"Hide Answer":"Show Answer"}},{key:"render",value:function(){return Object(j.jsx)("button",{onClick:this.props.onClick,children:this.calculateText()})}}]),n}(s.a.Component),L=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).canvasRef=s.a.createRef(),r}return Object(h.a)(n,[{key:"drawGrayscale",value:function(){for(var e=this.props.data[0].length,t=this.props.data.length,n=new Uint8ClampedArray(e*t*4),r=0;r<t;r++)for(var s=0;s<e;s++){var i=4*(r*e+s);n[i]=this.props.data[r][s],n[i+1]=this.props.data[r][s],n[i+2]=this.props.data[r][s],n[i+3]=255}var o=this.canvasRef.current,a=o.getContext("2d");a.clearRect(0,0,o.width,o.height);var c=a.createImageData(e,t);c.data.set(n),a.putImageData(c,0,0)}},{key:"drawCategorical",value:function(){var e={0:"rgb(0, 0, 0)",1:"rgb(0, 105, 207)",2:"rgb(255, 57, 55)",3:"rgb(0, 197, 67)",4:"rgb(255, 215, 49)",5:"rgb(160, 160, 160)",6:"rgb(249, 22, 179)",7:"rgb(255, 122, 44)",8:"rgb(99, 214, 252)",9:"rgb(130, 15, 35)",10:"rgb(255, 255, 255)"},t=this.canvasRef.current,n=t.getContext("2d"),r=t.width,s=t.height,i=this.props.data.length,o=this.props.data[0].length,a=.5,c=(r-a*o)/o,l=(s-a*i)/i;c=Math.min(c,l),1!==i&&(l=Math.min(c,l)),n.clearRect(0,0,r,s),n.save();for(var u=0;u<i;u++)for(var h=0;h<o;h++)n.fillStyle=e[this.props.data[u][h]],n.fillRect(h*(c+a),u*(l+a),c,l)}},{key:"componentDidUpdate",value:function(){this.redraw()}},{key:"componentDidMount",value:function(){this.redraw()}},{key:"redraw",value:function(){"grayscale"===this.props.type?this.drawGrayscale():"categorical_list"===this.props.type&&this.drawCategorical()}},{key:"render",value:function(){return Object(j.jsx)("canvas",Object(l.a)({ref:this.canvasRef},this.props))}}]),n}(s.a.Component),D=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;Object(u.a)(this,n);var s={};return(r=t.call(this,e)).state={problem_type:"all",problem_type_choices:[""],problem_name:"",problem_choices:[""],problem_data:s,description:""},r.handleProblemTypeChange=r.handleProblemTypeChange.bind(Object(c.a)(r)),r.handleProblemChange=r.handleProblemChange.bind(Object(c.a)(r)),r}return Object(h.a)(n,[{key:"getProblemTypes",value:function(){var e=this;fetch("/api/categories").then((function(e){return e.json()})).then((function(t){t.unshift("all"),e.setState({problem_type:"all",problem_type_choices:t},(function(t){e.getRelevantProblems()}))}))}},{key:"getRelevantProblems",value:function(){var e=this,t="all"===this.state.problem_type?"all":this.state.problem_type,n="/api/".concat(t);fetch(n).then((function(e){return e.json()})).then((function(t){for(var n=[],r=0;r<t.length;r++)t[r].hasOwnProperty("id")&&n.push(t[r].id);n.unshift(""),e.setState({problem:"",problem_choices:n})}))}},{key:"getDescription",value:function(){var e=this;console.log("getting description");var t="/api/".concat(this.state.problem_type,"/").concat(this.state.problem_name,"/description");fetch(t).then((function(e){return console.log(e),e.json()})).then((function(t){console.log(JSON.stringify(t)),e.setState({description:t.description})}))}},{key:"getProblem",value:function(){var e=this;if(""!==this.state.problem_name){var t="/api/".concat(this.state.problem_type,"/").concat(this.state.problem_name);fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({problem_data:t},(function(t){e.getDescription()}))}))}}},{key:"componentDidMount",value:function(){this.getProblemTypes()}},{key:"handleProblemTypeChange",value:function(e){var t=this;e.target.value!==this.state.problem_type&&this.setState({problem_type:e.target.value},(function(e){t.getRelevantProblems()}))}},{key:"handleProblemChange",value:function(e){var t=this;this.setState({problem_name:e.target.value},(function(e){t.getProblem()}))}},{key:"render",value:function(){var e,t=this.state.problem_data;return console.log(this.state.description),e=t&&0===Object.keys(t).length?[]:Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:this.state.description}),Object(j.jsxs)("div",{className:"side_by_side",children:[Object(j.jsx)(W,{grids:this.state.problem_data.context}),Object(j.jsx)(B,{answer_type:this.state.problem_data.answer_type,questions:this.state.problem_data.questions})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"side_by_side",children:[Object(j.jsx)(U,{value:this.state.problem_type,options:this.state.problem_type_choices,onChange:this.handleProblemTypeChange}),Object(j.jsx)(U,{value:this.state.problem_name,options:this.state.problem_choices,onChange:this.handleProblemChange})]}),e]})}}]),n}(s.a.Component),I=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"addStimulus",value:function(e){var t=this.props.data.stimulus.rows,n=this.props.data.stimulus.cols;t>0&&n>0&&e.push(Object(j.jsx)(E,{rows:t,cols:n,items:this.props.data.stimulus.items,type:this.props.data.stimulus.type},0))}},{key:"addChoices",value:function(e){var t=this.props.data.choices.length;if(t>0){var n=Math.ceil(t/3);e.push(Object(j.jsx)(E,{rows:n,cols:3,items:this.props.data.choices,type:this.props.answer_type},1))}}},{key:"addAnswer",value:function(e){var t;t=this.props.data.choices.length>0?"number":this.props.answer_type,e.push(Object(j.jsx)(M,{answer:this.props.data.answer,type:t},2))}},{key:"render",value:function(){var e=[];return this.addStimulus(e),this.addChoices(e),this.addAnswer(e),Object(j.jsx)("div",{children:e})}}]),n}(s.a.Component),M=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={show:!1,answer:r.props.answer},r.onButtonPress=r.onButtonPress.bind(Object(c.a)(r)),r}return Object(h.a)(n,[{key:"onButtonPress",value:function(){this.setState({show:!this.state.show,answer:this.props.answer})}},{key:"render",value:function(){var e=[Object(j.jsx)(G,{onClick:this.onButtonPress,show:this.props.show},0)];return this.state.show&&this.props.answer===this.state.answer?e.push(Object(j.jsx)(H,{type:this.props.type,data:this.props.answer},1)):this.state.show?this.setState({show:!1,answer:this.props.answer}):this.props.answer!==this.state.answer&&this.setState({answer:this.props.answer}),Object(j.jsx)("div",{children:e})}}]),n}(s.a.Component),B=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"generateQuestionDivs",value:function(){for(var e=[],t=0;t<this.props.questions.length;t++)e.push(Object(j.jsx)(I,{data:this.props.questions[t],answer_type:this.props.answer_type},t));return e}},{key:"render",value:function(){var e=this.generateQuestionDivs();return Object(j.jsx)("div",{children:e})}}]),n}(s.a.Component),E=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"getRelevantData",value:function(e,t){return t<e.length?e[t]:null}},{key:"buildTable",value:function(){for(var e=[],t=[],n=0;n<this.props.rows;n++){t=[];for(var r=0;r<this.props.cols;r++){var s=n*this.props.cols+r,i=this.getRelevantData(this.props.items,s);t.push(Object(j.jsx)("td",{children:Object(j.jsx)(H,{type:this.props.type,data:i})},s))}e.push(Object(j.jsx)("tr",{children:t},n))}return Object(j.jsx)("table",{children:Object(j.jsx)("tbody",{children:e})})}},{key:"render",value:function(){return Object(j.jsx)("div",{children:this.buildTable()})}}]),n}(s.a.Component),U=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"makeOptions",value:function(){var e=[];for(var t in this.props.options)e.push(Object(j.jsx)("option",{value:this.props.options[t],children:this.props.options[t]},t));return e}},{key:"render",value:function(){var e=this.makeOptions();return Object(j.jsx)("select",{value:this.props.value,onChange:this.props.onChange,children:e})}}]),n}(s.a.Component),W=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"getTables",value:function(){for(var e=[],t=0;t<this.props.grids.length;t++)e.push(Object(j.jsx)(E,{rows:this.props.grids[t].rows,cols:this.props.grids[t].cols,items:this.props.grids[t].items,type:this.props.grids[t].type},t));return e}},{key:"render",value:function(){var e=this.getTables();return Object(j.jsx)("div",{className:"side_by_side",children:e})}}]),n}(s.a.Component),H=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"decode",value:function(){return null===this.props.data?"":"string"===this.props.type?this.props.data:"grayscale"===this.props.type||"categorical_list"===this.props.type?Object(j.jsx)(L,{type:this.props.type,data:this.props.data}):"number"===this.props.type?this.props.data:void 0}},{key:"render",value:function(){var e=this.decode();return Object(j.jsx)("div",{children:e})}}]),n}(s.a.Component);var J=function(){var e=Object(r.useState)("create"),t=Object(a.a)(e,2),n=t[0];return t[1],Object(j.jsxs)("div",{className:"App",children:[!1,"view"===n&&Object(j.jsx)(D,{}),"create"===n&&Object(j.jsx)(_,{})]})};o.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(J,{})}),document.getElementById("root"))},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[210,1,2]]]);
//# sourceMappingURL=main.dbb82cfb.chunk.js.map